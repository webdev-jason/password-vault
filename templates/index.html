<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Password Vault</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=1">
    <style>
        .edit-mode-inputs { display: flex; flex-direction: column; gap: 5px; width: 100%; }
        .edit-mode-inputs input { padding: 8px; font-size: 0.9rem; }
        .footer { text-align: center; margin-top: 30px; font-size: 0.8rem; color: var(--text-muted); }
        .footer a { color: var(--text-muted); text-decoration: none; }
        .footer a:hover { color: var(--primary); text-decoration: underline; }
    </style>
</head>
<body>

    <div class="app-container">
        
        <!-- SECTION: LOGIN -->
        <div id="login-section" class="card">
            <h2>üîê Password Vault</h2>
            <p style="text-align: center; color: var(--text-muted); margin-bottom: 2rem;">Enter credentials to unlock</p>
            <div class="input-group">
                <label>Username</label>
                <input type="text" id="login-user" autocomplete="off" autocapitalize="off" autocorrect="off">
            </div>
            <div class="input-group">
                <label>Master Password</label>
                <div class="password-wrapper">
                    <input type="password" id="login-pass">
                    <button class="btn-eye" onclick="togglePassword('login-pass', this)" type="button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                    </button>
                </div>
            </div>
            <div class="input-group">
                <label>2FA Code</label>
                <input type="text" id="login-code" placeholder="000 000" maxlength="6" style="text-align: center; letter-spacing: 2px;">
            </div>
            <button class="btn btn-primary" onclick="attemptLogin()">Unlock Vault</button>
            <div id="error-msg" class="text-error"></div>
        </div>

        <!-- SECTION: DASHBOARD -->
        <div id="vault-section" class="hidden">
            <div class="header-row">
                <h2>My Passwords</h2>
                <a href="#" onclick="logout()" class="logout-link">Log Out</a>
            </div>

            <!-- Add New -->
            <div class="card">
                <div class="input-group"><input type="text" id="new-site" placeholder="Website (e.g. Netflix)"></div>
                <div class="input-group"><input type="text" id="new-user" placeholder="Username / Email" autocapitalize="off" autocorrect="off"></div>
                <div class="input-group" style="display: flex; gap: 8px;">
                    <div class="password-wrapper" style="flex-grow: 1;">
                        <input type="password" id="new-pass" placeholder="Password">
                        <button class="btn-eye" onclick="togglePassword('new-pass', this)" type="button">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                        </button>
                    </div>
                    <button class="btn btn-generate" onclick="generateRandomPassword()" title="Generate Random">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><circle cx="16" cy="8" r="2"></circle><circle cx="8" cy="16" r="2"></circle><circle cx="8" cy="8" r="2"></circle><circle cx="16" cy="16" r="2"></circle><circle cx="12" cy="12" r="2"></circle></svg>
                    </button>
                </div>
                <button class="btn btn-primary" onclick="addPassword()">Save Password</button>
            </div>

            <!-- List Area -->
            <div id="password-list"></div>
        </div>

        <!-- Footer with Privacy Link -->
        <div class="footer">
            <a href="/privacy" target="_blank">Privacy Policy</a>
            <span style="margin: 0 5px;">‚Ä¢</span>
            <span>Password Vault ¬© 2025</span>
        </div>
    </div>

    <!-- Link to the External JS File -->
    <script src="{{ url_for('static', filename='app.js') }}?v=1"></script>
</body>
</html>